<div [class]="containerClasses">
  <!-- Label -->
  @if (label()) {
    <label [class]="labelClasses">
      {{ label() }}
      @if (required()) {
        <span class="text-destructive ml-1">*</span>
      }
    </label>
  }

  <!-- Hint text -->
  @if (hint() && !hasErrors) {
    <div [class]="hintClasses">
      {{ hint() }}
    </div>
  }

  <!-- Input component -->
  <div class="relative">
    <app-input
      [type]="type()"
      [size]="size()"
      [variant]="inputVariant"
      [value]="value"
      [placeholder]="placeholder()"
      [disabled]="disabled()"
      [readonly]="readonly()"
      [loading]="loading()"
      [required]="required()"
      [leftIcon]="leftIcon()"
      [rightIcon]="rightIcon()"
      [showPasswordToggle]="showPasswordToggle()"
      [clearable]="clearable()"
      [autoComplete]="autoComplete()"
      [maxLength]="maxLength()"
      [minLength]="minLength()"
      [pattern]="pattern()"
      (inputChange)="onInputChange($event)"
      (inputBlur)="onInputBlur()"
      class="w-full"
    ></app-input>
  </div>

  <!-- Error messages -->
  @if (hasErrors) {
    <div [class]="errorClasses">
      @for (error of errorMessages; track error) {
        <div class="flex items-center gap-1">
          <svg class="w-3 h-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
          </svg>
          <span>{{ error }}</span>
        </div>
      }
    </div>
  }
</div>